---
title: 2026 年，谈谈 ShokaX Astro 迁移
date: 2026-01-02 20:23:29
tags:
---

## 前言

2026 年，ShokaX 终于成功初步把 ShokaX 迁移到了一个现代平台上，本文主要回答几个问题：

- 为什么要迁移
- 为什么是 Astro
- 现在进度如何
- 后续计划是什么

本文面向的是想详细了解 ShokaX Astro 迁移背景故事的读者，不是 FAQ 和迁移指南，此方面内容请移步 Github 讨论区

## 为什么要迁移

简而言之，Hexo 的整体架构设计，已经难以承载当前前端工程化与现代化所要求的开发模式。很多新技术难以使用，严重影响了开发进度、新功能添加与性能优化

最明显的一点，Hexo 至今仍然不支持在脚本中使用 ESModule。这意味我们基本上完全无法使用任何 ESM Pure 的库（或者可以事先进行转译，但很麻烦）
受制于此，我们在 Summary AI、Aether 渲染器、SMB 引擎开发和引入前端框架组件等任务中都被迫采取了很多妥协方案

以及，ShokaX 长期以来被诟病的安装流程问题。这是由于 Hexo 运行脚本时会在 Blog 根目录运行，而其项目结构将依赖限制在 theme 层和 pnpm 这种严格包管理器不会主动提升依赖所导致。为了保证 esbuild 能正确识别依赖，我们只能使用 ShokaX-Can 和手动提升依赖这两种解决方案，这极大提高了用户接受成本。

而且，Hexo 自身构建系统和开发者体验服务太原始了。习惯了基于 Vite 的开发体验后，在 Hexo 上开发项目是一件很痛苦的事。

最后，我已经不再认为，通过持续为 Hexo 打现代化补丁，是一条可持续的技术路径。Hexo 自身的低技术门槛与易用性，在复杂主题与深度定制场景下，有时反而会成为开发层面的限制因素，尤其当开发者为了做出一些改变必须打破固有成见时。我已经不想再因为 ShokaX 在 Hexo 平台所做的现代化补丁而遭受批评了。

综上，这就是迁移的原因，由技术和我个人理由共同组成，我很难说两者究竟哪个占上风，但是总而言之，Hexo 已经不太适合 ShokaX 了。

## 为什么是 Astro

在开始之前，先让我们简单介绍一下 ShokaX 的迁移史：

- valaxy-theme-shokaX（2023年11月10日-2024年2月14日，未产出任何成果便终止开发）
- astro-theme-shokaX（2024年2月15日-2024年6月24日，未产出任何成果便终止开发）
- Hexo ShokaX SMB （ShokaX 0.3/0.4/0.5，事实上的缝合怪）
- ShokaX UIKit（2025年1月27日-2025年12月12日，产出了部分 Vue3 组件库和 Nyx-Player，经转译用于 ShokaX Astro）

这一部分主要面向对 ShokaX 技术演进感兴趣的读者，可跳读。

### 四个项目

#### valaxy-theme-shokaX

Valaxy Theme ShokaX 是 ShokaX 向 Valaxy 迁移的第一次尝试，也是第一次向现代平台迁移的尝试

综合来看，这次迁移几乎是必然失败的，因为：

- Valaxy 太年轻了，2023年的 Valaxy 仍然处于早期开发阶段。
- 技术栈问题，当时的 ShokaX 处在 0.2->0.3过渡期，技术栈高度落后过时。
- 整体思路问题，当时的主要思路是保持多旗舰，即 Valaxy + Nuxt + Hexo 并行，事实证明完全不可行且浪费大量资源。
- 人员能力问题，其中一名主要维护者（我）先前几乎未接触过现代前端，未学习过 Vue 框架及相关内容，导致迁移进展缓慢。

所以，因为进展缓慢和 SMB 路线的出现，valaxy-theme-shokaX 很快便终止开发了，其遗产（几乎没有）转移到了 astro-theme-shokaX 中

#### astro-theme-shokaX

astro-theme-shokaX是一个无疾而终的项目，因为其没有面临像 Valaxy-theme-shokaX 那样的严重问题，其只面临**工作量大**这一个问题

当时由于 AI Coding 尚未成熟，模板间的翻译工作仍主要依靠人力进行，导致了严重的进展缓慢问题

astro-theme-shokaX 在 2024 年中后期停止开发，主要原因已难以完整追溯，但可以确认的是，当时受限于人力与迁移工作量评估，该路线未能继续推进。

#### Hexo ShokaX SMB

这是一个很缝合怪的路线。本质是在 Hexo 的传统引擎中强行插入一套基于 esbuild 的半现代构建系统，并依赖这个系统进行现代化迁移

这个系统在 ShokaX 中起到了相当大的作用，支撑了 0.3/0.4 模块化和0.5 UIKit 两次大版本更新，但是：

- 其未能解决模板渲染问题。这导致了 SMB 路线的 ShokaX 事实上未进行任何组件迁移，并且一定程度上拖后了现代化迁移的进行
- 其仍然基于 Hexo。SMB 系统为了和 Hexo 兼容付出了相当大的代价
- 其未能解决根本问题。ShokaX 事实上并不需要一个 esbuild，而需要一个基于 Vite 的真正现代化平台
- 其未改善开发者与用户体验问题。SMB 甚至进一步加剧了开发者体验的降低，并直接导致了用户使用难和安装难
- 其限制了开发自由度。SMB 提供了一个在当时条件下可用，但并不适合长期演进的方案，导致了这一时期的开发决策事实上被 SMB 所改变了

SMB 在 Hexo ShokaX 中仍在使用，但已事实性终止维护

SMB 路线降低了现代化迁移的紧迫性，但为 UIKit 的发展提供了机会

#### ShokaX UIKit

ShokaX 向 Valaxy 迁移的第二次尝试，进展不顺。

目前因为 UIKit 尚未完全终止开发，我无法做出全面的评价。

UIKit 产出了一些 Vue 3 组件和 Nyx-player，这些组件被转译到 Svelte 后被用于 ShokaX Astro

#### 总结

总而言之，ShokaX 长期以来的迁移表明了三点：

- ShokaX 的迁移需要一个高自由度的框架，以实施渐进性过渡和保证用户体验连续性。
- ShokaX 的迁移必须选择一个稳定而持久的框架，并需要主动降低迁移风险。
- ShokaX 的迁移很可能需要彻底性地解决历史性技术栈，否则迁移本身并无意义。

### 所以，为什么是 Astro?

因为 Astro 是最符合 ShokaX 进一步发展需要的框架。

在新兴框架中，Astro 是生态、文档和资源最好的一个框架，其 SSG 优先理念和 MPA 设计我认为是最符合个人博客开发需求的。

而且，Astro 提供自动图像优化、多种前端框架兼容、群岛架构和可选 SSR 等一系列先进特性，这些特性毫无疑问是 ShokaX 所需要的。ShokaX Hexo 长期以来进行的优化很大程度上就是造了 Astro 这方面的轻量级简化轮子。ShokaX 在 Astro 迁移的 Alpha 版本中就能取得远超于 Hexo 版本的性能表现，就是本点的最好证明。

其次，Astro 自身是通用框架，这意味着它天然会拥有更好的生态，也意味着开发者的学习价值更高。而且其兼容 Vite 与 Remark 生态，能大幅减少我们需要造的轮子量

以及，Astro 给了开发者很大的自由空间。Astro 上的开发自由度比 Hexo 还要高，这是其他框架所不具有的。我一直认为框架应该少管些事，多做些事，尽可能多把开发自由权留给开发者，但同时还能提供开发者需要的功能，这点上我认为 Astro 做得很好。同时，由于 ShokaX 自身具有大量功能特性，为了保证迁移成本尽可能处于低位，我们需要保证功能的用法与 Hexo 版基本一致，这也意味着我们需要很大的自由空间。

虽然 ShokaX 在用户量上称不上是大型主题，但代码量与复杂度上可以称为大型主题了。所以我们和很多博客主题的主要迁移诉求是不一样的：我们希望框架尽可能少管事，便于我们实施自己的解决方案，而非只能套用和修改框架提供的解决方案。所以，Astro 成为了我们的理想之选。

### 为什么不是？

#### Valaxy

Valaxy 长期以来都是我们的选择之一，但现在看来，我对于 Valaxy 无法做出客观评价。

我会在 Astro 迁移完成之后补上本部分。

#### Nuxt / Next.js

Nuxt / Next.js 虽然其他方面不一定差于 Astro，但是其毕竟不是 SSG 优先，博客也不是其典型应用场景

我们希望保持 ShokaX 整体的易用性和低门槛，并且我作为主要维护者技术栈中不包括 React，所以我们没有选择 Nuxt / Next.js

#### Hugo / Halo 和其他框架

我希望把 ShokaX 的技术栈控制在 Node / Bun + Typescript 上，并且使用一个基于 Vite 的框架

这样能最大程度降低 Hexo 用户迁移成本，也能降低我们的迁移负担

## 现状如何

我们在 Astro 上取得了相当可观的进展。

目前，ShokaX Astro 已经完成了 90% 的 ShokaX Lite 功能集要求，已经可以用于搭建轻量级博客站点，但因为开发周期过短且迁移变化较大，当前配置与 API 不稳定，所以我们不建议将其用于生产，仅建议开发者或自身用户用于体验

我们已经完成了对站点运行时性能的整体技术优化，完成了导航栏与侧边栏等复杂交互岛屿的完整迁移与验证，初步开展了针对 ShokaX 复杂 Markdown 特性的迁移，完成了对于动画与页面设计重构的初步设计与验证。同时，面向 ShokaX Astro 开发的 Hyacine 系列支持性项目也已陆续开工，相关基础设施建设持续推进。我们有理由相信 ShokaX Astro 能成为下一代旗舰平台

得益于 AI Coding 的发展，Astro 迁移能以极短的开发周期完成原型，并且大量人力密集型工作能被很轻松地完成，这是为什么我们选择再次向 Astro 迁移的重要原因

## 后续计划

因为计划的多变性，本文不分条列举，你可以在 Github Issues 中查看当前需要解决的问题

总而言之，目前的我们的主要任务及其顺序：

- 完成对 ShokaX Lite 功能集实现
- 达到初步生产可用
- 初步完成基础设施建设
- 完成对 ShokaX Std 功能集实现
- 达到生产可用
- 进一步开发新功能

这就是 ShokaX Astro 的后续计划
